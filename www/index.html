<!doctype html>
<html>
	<head>
		<title>Setup Wizard - Onion Omega</title>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="author" content="Onion Corporation" />
		<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes" />
		<link rel="stylesheet" href="/css/bootstrap.css" />
		<link rel="stylesheet" href="/css/styles.css" />
		<link rel="stylesheet" href="/icons/glyphicons.css" />
		<link rel="stylesheet" href="/icons/onion.css" />
	</head>
	<body>
		<section class="wrapper">
			<div class="card card-block main">
				<div class="onion-logo"></div>
				<h2 class="m-t-md m-b-lg text-center">Onion Omega Setup Wizard</h2>
				<ul id="steps-indicator"  class="m-b-lg">
		            <li>Login</li>
		            <li>WiFi</li>
		            <li>Cloud</li>
		            <li>Software</li>
		            <li>Done!</li>
		        </ul>

		        <div id="steps">
		        	<!-- Step 1: Login to Omega -->
		        	<div>
		        		<div class="row">
		        			<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 col-lg-offset-2 col-md-offset-2 col-sm-offset-2 col-xs-offset-2">
				        		<form id="login-form">
									<fieldset class="form-group">
										<label for="login-username">Username</label>
										<input type="text" class="form-control" id="login-username" autocomplete="off" />
									</fieldset>
									<fieldset class="form-group">
										<label for="login-password">Password</label>
										<input type="password" class="form-control" id="login-password" autocomplete="off" />
									</fieldset>

									<div id="login-message"></div>

									<button type="submit" class="btn btn-info">Log In</button>
								</form>
							</div>
						</div>
		        	</div>

		        	<!-- Step 2: Setup WiFi -->
		        	<div>
						<div id="wifiLoading" class="loading"></div>
						<div id="wifi-connect">
							<form id="wifi-form">
								<div class="form-group row">
									<label for="wifi-select" class="col-lg-4 col-md-4 col-sm-4 col-xs-4 form-control-label">Detected Networks</label>
									<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
										<select class="form-control c-select" id="wifi-select" autocomplete="off"></select>
									</div>
									<div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
										<button id="wifi-scan-btn" type="button" class="btn btn-block btn-primary"><span id="wifi-scan-icon" class="glyphicons glyphicons-refresh"></span></button>
									</div>
								</div>
								<div class="form-group row">
									<label for="wifi-ssid" class="col-lg-4 col-md-4 col-sm-4 col-xs-4 form-control-label">WiFi Network (SSID)</label>
									<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
										<input type="text" class="form-control" id="wifi-ssid" autocomplete="off" />
									</div>
								</div>
								<div class="form-group row">
									<label for="wifi-encryption" class="col-lg-4 col-md-4 col-sm-4 col-xs-4 form-control-label">Security</label>
									<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
										<select class="form-control c-select" id="wifi-encryption" autocomplete="off">
											<option value="none">None</option>
											<option value="wep">WEP</option>
											<option value="psk">WPA</option>
											<option value="psk2">WPA2</option>
										</select>
									</div>
								</div>
								<div class="form-group row">
									<label for="wifi-key" class="col-lg-4 col-md-4 col-sm-4 col-xs-4 form-control-label">WiFi Password</label>
									<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
										<input type="password" class="form-control" id="wifi-key" autocomplete="off" />
									</div>
								</div>

								<div class="row">
									<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 col-lg-offset-4 col-md-offset-4 col-sm-offset-4 col-xs-offset-4">
										<div id="wifi-message"></div>
									</div>
								</div>
									<div class="form-group row">
										<button id="wifi-config-button" type="submit" class="btn btn-info btn-block">Configure WiFi</button>
									</div>
								<div class="row">
									<div class="col-sm-6">
										<button id="wifiBackButton" type="button" class ="btn btn-secondary btn-block moveLeft" style="display:none;">< Back</button>
									</div>
									<div class="col-sm-6">
										<button id="skipStepTestButton" type="button" class="btn btn-secondary btn-block moveRight">Skip Step > </button>
									</div>
								</div>
							</form>
						</div>
						<div class="container" id="wifi-list">
							<div class="list-group layout vertical end-justified">
								<div id="networkTable">
									<div class="list-group-item layout horizontal end">
										<div>Configured WiFi Networks</div>
										<!-- <div class="flex"></div> -->
										<!-- <div>Actions</div> -->
									</div>
								</div>
									
							</div>
								<div class="row">
								<button type="button" id="addWifiButton" class="btn btn-info btn-block" data-toggle="modal" data-target="#wifiModal">Add WiFi Network</button>
								</div>
							<div class="row">
									<div class="col-sm-6">
										<button id="wifiBackButton" type="button" class ="btn btn-secondary btn-block moveLeft" style="display:none;">< Back</button>
									</div>
									<div class="col-sm-6">
										<button id="skipWifiButton" type="button" class="btn btn-secondary btn-block moveRight">Skip Step ></button>
									</div>
							</div>
						</div>
							<!-- Modal -->
							<div id="wifiModal" class="modal fade" role="dialog" style="width100%;height:100%;">
							  <div class="modal-dialog">

								<!-- Modal content-->
								<div class="modal-content">
									<div class="modal-body">
									<form id="wifi-form-modal">
										<div class="form-group row">
											<label for="wifi-select-modal" class="col-lg-4 col-md-4 col-sm-4 col-xs-4 form-control-label">Detected Networks</label>
											<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
												<select class="form-control c-select" id="wifi-select-modal" autocomplete="off"></select>
											</div>
											<div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
												<button id="wifi-scan-btn-modal" type="button" class="btn btn-block btn-primary"><span id="wifi-scan-icon-modal" class="glyphicons glyphicons-refresh"></span></button>
											</div>
										</div>
										<div class="form-group row">
											<label for="wifi-ssid-modal" class="col-lg-4 col-md-4 col-sm-4 col-xs-4 form-control-label">WiFi Network (SSID)</label>
											<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
												<input type="text" class="form-control" id="wifi-ssid-modal" autocomplete="off" />
											</div>
										</div>
										<div class="form-group row">
											<label for="wifi-encryption-modal" class="col-lg-4 col-md-4 col-sm-4 col-xs-4 form-control-label">Security</label>
											<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
												<select class="form-control c-select" id="wifi-encryption-modal" autocomplete="off">
													<option value="none">None</option>
													<option value="wep">WEP</option>
													<option value="psk">WPA</option>
													<option value="psk2">WPA2</option>
												</select>
											</div>
										</div>
										<div class="form-group row">
											<label for="wifi-key-modal" class="col-lg-4 col-md-4 col-sm-4 col-xs-4 form-control-label">WiFi Password</label>
											<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
												<input type="password" class="form-control" id="wifi-key-modal" autocomplete="off" />
											</div>
										</div>

										<div class="row">
											<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 col-lg-offset-4 col-md-offset-4 col-sm-offset-4 col-xs-offset-4">
												<div id="wifi-message-modal"></div>
											</div>
										</div>
											<!-- <div class="form-group row"> -->
											<div class="modal-footer">
												<button id="wifi-config-button-modal" type="submit" class="btn btn-info btn-block">Connect to Network</button>
											</div>
											<!-- <div class="row"> -->
											<!-- <div class="col-sm-6"> -->
												<!-- <button id="wifiBackButton" type="button" class ="btn btn-success btn-block" style="display:none;">Back</button> -->
											<!-- </div> -->
											<!-- <div class="col-sm-6"> -->
												<!-- <button id="skipStepTestButton" type="button" class="btn btn-success btn-block">Skip Step</button> -->
											<!-- </div> -->
											<!-- </div> -->
									<!-- </form> -->
								</div>

								  <!-- <div class="modal-footer"> -->
									<!-- <button id="wifi-config-button" type="submit" class="btn btn-success btn-block">Configure WiFi</button> -->
								  <!-- </div> -->
								</div>
									</form>

							  </div>
							</div>
						
		        	</div>

		        	<!-- Step 3: Setup the cloud here -->

		        	<div>
		        		<div id="cloudLoading" class="loading"></div>
		        		<div id="cloudText"><p>Register your Omega on the Onion Cloud.</p>
						<p>Using the Onion Cloud, you can remotely manage and control your device, use the Cloud Compile service, and use apps to interact with your device.</p></div>
						<div id="deviceId-list" style="display:none;">
							<table class="table table-bordered">
								<thead>
								  <tr>
									<th>Device Id</th>
									<th id="deviceId"></th>
								  </tr>
								</thead>
						  </table>
						</div>
						<div id="cloudRegMessage"></div>
						<div class="form-group row">
			        		<!-- <button id="setupCloudButton" type="button" class="btn btn-success btn-block">Setup Cloud</button> -->
							<!-- <button type="button" class="modal-open">Setup Cloud</button> -->
								<!-- Trigger the modal with a button -->
							<button id="registerDeviceButton" type="button" class="btn btn-info btn-block" data-toggle="modal" data-target="#myModal">Register Device on Cloud</button>

							<!-- Modal -->
							<div id="myModal" class="modal fade" role="dialog" style="width100%;height:100%;">
							  <div class="modal-dialog">

								<!-- Modal content-->
								<div class="modal-content">
								  <!-- <div class="modal-header"> -->
									<!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
									<!-- <h4 class="modal-title">Modal Header</h4> -->
								  <!-- </div> -->
								  <div id="iframe-div">
									<iframe id="iframe" src="" style="width:100vw;height:100vh;"></iframe>
								  </div>
								  <!-- <div class="modal-footer"> -->
									<!-- <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> -->
								  <!-- </div> -->
								</div>

							  </div>
							</div>
			        	</div>
		        		<div class='row'>
			        		<div class="col-sm-6">
			        			<button id="setupCloudBackButton" type="button" class ="btn btn-secondary btn-block moveLeft">< Back</button>
			        		</div>
		        			<div class="col-sm-6">
			        			<button id="skipCloudReg" type="button" class="btn btn-secondary btn-block moveRight">Skip Step ></button>
			        		</div>
		        		</div>
		        	</div>


		        	<!-- Step 4: Software Updates -->
					<div>
						<!-- <h3 class="m-b-md">Firmware Update</h3> -->
						<div id="firmwareText"></div>
						<div style="text-align:center;" class="checkbox">
							<label>Install Console<input type="checkbox" name="console" id="consoleInstall" value="Console" style="margin-left:5px;" checked><br>
							</label>
						</div>
						<div id="consoleText"></div>
						<div class="form-group row">
							<button id="upgradeFirmwareButton" type="button" class="btn btn-info btn-block">Upgrade Firmware</button>
						</div>
						<div id="firwareButtonContainer" class="row">
							<div class="col-sm-6">
								<button id="firmwareBackButton" type="button" class = "btn btn-secondary btn-block moveLeft">< Back</button>
							</div>
							<!-- <div class="col-sm-6"> -->
								<!-- <button id="skipFirmwareStep" type="button" class="btn btn-success btn-block">Skip Step</button> -->
							<!-- </div> -->
						</div>		        		
					</div>
					
		        	<!-- Step 5: Finished! -->
		        	<div>
						<div id="downloading">
							<h4 class="m-b-md">The Omega is downloading the latest firmware, sit tight!</h4>
							<progress id="download-progress" class="progress progress-striped progress-animated" value="0" max="0"></progress>
						</div>
		        		<div id="upgrade-required">
							<progress id="time" class="progress progress-striped progress-animated" value="0" max="2400"></progress>
							<div id="warning" class="alert alert-danger m-t-lg" role="alert">
								<p class="text-center">The firmware upgrade has started! Please be patient while the Omega updates and finalizes configuration, this can take up to 3 minutes.</p>
								<p class="text-center">Once completed, the Omega will reboot automatically.</p>
								<p class="text-center"><strong>Do NOT unplug the Omega during this process.</strong></p>
								<p class="text-center">Once the update is complete, your Omega will stop flashing.</p>
							</div>
			        		<div id="success" class="alert alert-success" role="alert">
								<p class="text-center"><strong>You have successfully set up your Omega!</strong></p>
								<p class="text-center">You can now safely exit the Setup Wizard and start using your Omega</p>
							</div>
						</div>
						<div id="upgrade-not-required">
							<div class="alert alert-success m-t-lg" role="alert">
								<p class="text-center"><strong>You have successfully set up your Omega!</strong></p>
								<p class="text-center">You can now safely exit the Setup Wizard.</p>
							</div>
						</div>
						<div id="install-console-only">
							<div class="alert alert-success m-t-lg" role="alert">
								<p class="text-center"><strong>You have successfully set up your Omega!</strong></p>
								<p class="text-center">Please wait while the console is installed.</p>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-6">
								<button id="completeBackButton" type="button" class="btn btn-secondary btn-block moveLeft">< Back</button>
							</div>
						</div>
		        	</div>
		        </div>
			</div>
		</section>
		
		<script src="/js/jquery.js"></script>
		<script src="/js/jquery.storage.js"></script>
		<script src="/js/bootstrap.js"></script>
		<script src="/js/main.js"></script>
	</body>
</html>
